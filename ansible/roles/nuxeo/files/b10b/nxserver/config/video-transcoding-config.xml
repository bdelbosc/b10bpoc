<?xml version="1.0"?>
<component name="b10b-video-config">
  <require>org.nuxeo.ecm.platform.video.service.contrib</require>
  <require>org.nuxeo.platform.video.core.listeners</require>

  <!-- disable very slow webm conversion -->
  <extension point="automaticVideoConversions" target="org.nuxeo.ecm.platform.video.service.VideoService">
    <automaticVideoConversion name="WebM 480p" order="10" enabled="false" />
  </extension>

  <!-- Replace the default sync listener that is slow and generate too much async works -->
  <extension target="org.nuxeo.ecm.core.event.EventServiceComponent" point="listener">
    <listener name="videoChangedListener" enabled="false" />
    <listener name="videoImportListener" async="false" postCommit="false"
      class="org.nuxeo.ecm.platform.video.listener.VideoImportListener" priority="20">
      <event>documentCreated</event>
    </listener>
  </extension>

</component>
